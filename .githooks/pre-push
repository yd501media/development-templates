#!/bin/sh
set -eu

while read -r _local_ref _local_sha _remote_ref _remote_sha; do
  if [ "$_remote_ref" = "refs/heads/main" ] || [ "$_local_ref" = "refs/heads/main" ]; then
    echo "Error: direct pushes to 'main' are blocked. Use a PR workflow." >&2
    exit 1
  fi
done
